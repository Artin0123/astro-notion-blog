# 套件現代化與必要性分析

## 一、已移除（未使用）

| 套件 | 說明 |
|------|------|
| **@astrojs/react** | ✅ 已移除。專案未使用 React。 |
| **react** | ✅ 已移除。 |
| **react-dom** | ✅ 已移除。 |

---

## 二、核心且必要（保留）

| 套件 | 用途 | 現代化 |
|------|------|--------|
| **astro** | 框架核心 | ✅ 5.x 最新 |
| **@astrojs/rss** | feed.ts 產生 RSS | ✅ |
| **@notionhq/client** | Notion API 讀取 | ✅ 官方 SDK |
| **astro-icon** | SearchButton 搜尋圖示 | ✅ |
| **@iconify-json/octicon** | octicon 圖示集（供 astro-icon） | ✅ |
| **sharp** | 圖片處理、EXIF、縮圖 | ✅ 0.34 |
| **katex** | 數學公式（Equation、RichText） | ✅ |
| **mermaid** | 程式碼區塊內的流程圖 | ✅ |
| **prismjs** | 程式碼語法高亮 | ✅ |
| **exif-be-gone** | 下載圖片時移除 EXIF | ✅ |

---

## 三、有意義但可考慮替代

### 3.1 async-retry → p-retry ✅ 已替換

| 項目 | 說明 |
|------|------|
| **現況** | 已改用 **p-retry**（持續維護） |

### 3.2 axios → native fetch ✅ 已替換

| 項目 | 說明 |
|------|------|
| **現況** | 已改用 Node 18+ 原生 `fetch` + `Readable.fromWeb(res.body)` |

### 3.3 metascraper 系列

| 項目 | 說明 |
|------|------|
| **現況** | Bookmark 區塊擷取連結的 title、description、image |
| **替代** | 自建 og:meta 解析，或改用較輕量的 og 解析套件 |
| **價值** | 低。metascraper 模組化、可擴充，目前足夠 |

---

## 四、建置與腳本相關

| 套件 | 用途 | 說明 |
|------|------|------|
| **@supercharge/promise-pool** | blog-contents-cache 並行控制 | ✅ 控制 CACHE_CONCURRENCY |
| **cli-progress** | cache:fetch 進度條 | ✅ |
| **nx** | 區塊快取、nx reset | ✅ |
| **@nrwl/nx-cloud** | ✅ 已移除。nx.json 改用 local cache（targetDefaults） |

---

## 五、開發工具（devDependencies）

| 套件 | 說明 |
|------|------|
| **@astrojs/check** | Astro 型別檢查 | ✅ |
| **@typescript-eslint/\*** | ESLint TypeScript 支援 | ✅ |
| **eslint** | 程式碼檢查 | ✅ |
| **eslint-plugin-astro** | Astro 專用規則 | ✅ |
| **typescript** | 型別系統 | ✅ |
| **@types/async-retry** | async-retry 型別 | 若改用 p-retry 可移除 |
| **@types/katex** | katex 型別 | ✅ |
| **@types/prismjs** | prismjs 型別 | ✅ |

---

## 六、總結建議

### 已完成

1. ✅ 移除 React 相關套件
2. ✅ async-retry → p-retry
3. ✅ axios → native fetch
4. ✅ @nrwl/nx-cloud → local cache（nx.json targetDefaults）

### 保留現狀

- metascraper、sharp、katex、mermaid、prismjs 等皆為常見、維護良好的套件
- 整體依賴結構合理，無明顯過時或重複
