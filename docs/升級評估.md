# 套件升級評估

## 已完成（無需大改）

- **pnpm update**：所有套件已更新至 semver 範圍內最新版
- **移除 deprecated @types**：`@types/js-base64`、`@types/metascraper*`（主套件已內建型別）
- **sharp 0.33 → 0.34**：圖片處理更新，Astro 建置相容

---

## 大改升級：價值評估

### @notionhq/client 2.x → 5.x

| 項目 | 說明 |
|------|------|
| **價值** | ⭐ 低（目前） |
| **原因** | v5 對應 Notion API `2025-09-03`，主打「多 data source」架構。若你只用單一 database 當部落格，現有 v2 已足夠 |
| **何時值得** | 若 Notion 強制淘汰舊 API、或需 multi-source 功能時再升級 |
| **建議** | 暫不升級，等官方通知或新需求時再處理 |

### ESLint 9 → 10

| 項目 | 說明 |
|------|------|
| **價值** | ⭐⭐ 中 |
| **好處** | 強制 flat config、JSX 範圍分析更準、新規則（`preserve-caught-error` 等） |
| **成本** | 需將 `.eslintrc.json` 遷移至 `eslint.config.js` |
| **建議** | 有空時再處理。可用 `npx @eslint/migrate-config .eslintrc.json` 輔助遷移 |

### Astro 5 → 6

| 項目 | 說明 |
|------|------|
| **價值** | ⭐⭐ 中（長期） |
| **好處** | Vite 7、開發環境改善、Cloudflare Workers 原生支援 |
| **成本** | Node 22.12+、Zod 4、Vite 7 相容性 |
| **建議** | 等 6 正式版穩定後再評估，目前 5.x 足夠 |

### nx 20 → 22

| 項目 | 說明 |
|------|------|
| **價值** | ⭐ 低 |
| **原因** | 專案僅用 `nx reset` 與 `_fetch-notion-blocks`，影響有限 |
| **建議** | 可選，無需優先 |

---

## 可移除的套件

| 套件 | 狀態 | 說明 |
|------|------|------|
| **@types/js-base64** | ✅ 已移除 | js-base64 內建型別 |
| **@types/metascraper*** | ✅ 已移除 | metascraper 系列內建型別 |
| **@nrwl/nx-cloud** | 保留 | nx.json 設為 runner，移除需同步改 nx 設定 |
| **cli-progress** | 保留 | 用於 cache:fetch 進度條 |

---

## 總結

- **已完成**：無需大改的升級與移除 deprecated 套件
- **暫不建議**：@notionhq/client v5（除非有明確需求）
- **建議擇期**：ESLint 10、Astro 6，等有時間再處理
